"use strict";var _createClass=function(){function t(n,e){for(var o=0;o<e.length;o++){var t=e[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(n,e,o){return e&&t(n.prototype,e),o&&t(n,o),n}}();function _classCallCheck(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var stores=["calculations"],dbName="vanillaframe",version=2,connection=null,close=null,ConnectionFactory=function(){function t(){throw _classCallCheck(this,t),new Error("Cannot instantiate ConnectionFactory because it is a static class")}return _createClass(t,null,[{key:"getConnection",value:function(){return new Promise(function(e,o){var n=window.indexedDB.open(dbName,version);n.onupgradeneeded=function(n){t._createStores(n.target.result)},n.onsuccess=function(n){connection||(connection=n.target.result,close=connection.close.bind(connection),connection.close=function(){throw new Error("You can only close the connection directly by the function ConnectionFactory.closeConnection")}),e(connection)},n.onerror=function(n){console.log(n.target.error),o(n.target.error.name)}})}},{key:"_createStores",value:function(e){stores.forEach(function(n){e.objectStoreNames.contains(stores)&&e.deleteObjectStore(n),e.createObjectStore(n,{autoIncrement:!0})})}},{key:"closeConnection",value:function(){connection&&(close(),connection=null)}}]),t}();
//# sourceMappingURL=ConnectionFactory.js.map
