{"version":3,"sources":["dao/CalculationDao.js"],"names":["_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","Constructor","protoProps","staticProps","prototype","_classCallCheck","instance","TypeError","CalculationDao","connection","this","_connection","_store","value","calculation","_this","Promise","resolve","reject","request","transaction","objectStore","add","onsuccess","e","onerror","console","log","error","_this2","cursor","openCursor","calculations","actual","result","data","push","Calculation","_date","_expression","_result","continue","_this3","clear"],"mappings":"AAAA,aAEA,IAAIA,aAAe,WAAc,SAASC,EAAiBC,EAAQC,GAAS,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CAAE,IAAIE,EAAaH,EAAMC,GAAIE,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMC,OAAOC,eAAeT,EAAQI,EAAWM,IAAKN,IAAiB,OAAO,SAAUO,EAAaC,EAAYC,GAAiJ,OAA9HD,GAAYb,EAAiBY,EAAYG,UAAWF,GAAiBC,GAAad,EAAiBY,EAAaE,GAAqBF,GAA7gB,GAEnB,SAASI,gBAAgBC,EAAUL,GAAe,KAAMK,aAAoBL,GAAgB,MAAM,IAAIM,UAAU,qCAEhH,IAAIC,eAAiB,WACjB,SAASA,EAAeC,GACpBJ,gBAAgBK,KAAMF,GAEtBE,KAAKC,YAAcF,EACnBC,KAAKE,OAAS,eA0ElB,OAvEAxB,aAAaoB,EAAgB,CAAC,CAC1BR,IAAK,MACLa,MAAO,SAAaC,GAChB,IAAIC,EAAQL,KAEZ,OAAO,IAAIM,QAAQ,SAAUC,EAASC,GAElC,IAAIC,EAAUJ,EAAMJ,YAAYS,YAAY,CAACL,EAAMH,QAAS,aAAaS,YAAYN,EAAMH,QAAQU,IAAIR,GAEvGK,EAAQI,UAAY,SAAUC,GAC1B,OAAOP,KAEXE,EAAQM,QAAU,SAAUD,GACxBE,QAAQC,IAAIH,EAAElC,OAAOsC,OACrBV,EAAO,oDAIpB,CACClB,IAAK,UACLa,MAAO,WACH,IAAIgB,EAASnB,KAEb,OAAO,IAAIM,QAAQ,SAAUC,EAASC,GAElC,IAAIY,EAASD,EAAOlB,YAAYS,YAAY,CAACS,EAAOjB,QAAS,aAAaS,YAAYQ,EAAOjB,QAAQmB,aAEjGC,EAAe,GAEnBF,EAAOP,UAAY,SAAUC,GACzB,IAAIS,EAAST,EAAElC,OAAO4C,OAEtB,GAAID,EAAQ,CAER,IAAIE,EAAOF,EAAOpB,MAElBmB,EAAaI,KAAK,IAAIC,YAAYF,EAAKG,MAAOH,EAAKI,YAAaJ,EAAKK,UAErEP,EAAOQ,gBAEPxB,EAAQe,IAIhBF,EAAOL,QAAU,SAAUD,GACvBE,QAAQC,IAAIH,EAAElC,OAAOsC,OACrBV,EAAO,qDAIpB,CACClB,IAAK,WACLa,MAAO,WACH,IAAI6B,EAAShC,KAEb,OAAO,IAAIM,QAAQ,SAAUC,EAASC,GAElC,IAAIC,EAAUuB,EAAO/B,YAAYS,YAAY,CAACsB,EAAO9B,QAAS,aAAaS,YAAYqB,EAAO9B,QAAQ+B,QAEtGxB,EAAQI,UAAY,SAAUC,GAC1B,OAAOP,KAGXE,EAAQM,QAAU,SAAUD,GACxBE,QAAQC,IAAIH,EAAElC,OAAOsC,OACrBV,EAAO,wDAMhBV,EA/EU","file":"CalculationDao.js","sourcesContent":["'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar CalculationDao = function () {\n    function CalculationDao(connection) {\n        _classCallCheck(this, CalculationDao);\n\n        this._connection = connection;\n        this._store = 'calculations';\n    }\n\n    _createClass(CalculationDao, [{\n        key: 'add',\n        value: function add(calculation) {\n            var _this = this;\n\n            return new Promise(function (resolve, reject) {\n\n                var request = _this._connection.transaction([_this._store], 'readwrite').objectStore(_this._store).add(calculation);\n\n                request.onsuccess = function (e) {\n                    return resolve();\n                };\n                request.onerror = function (e) {\n                    console.log(e.target.error);\n                    reject('Failed on saving calculation into IndexedDB');\n                };\n            });\n        }\n    }, {\n        key: 'listAll',\n        value: function listAll() {\n            var _this2 = this;\n\n            return new Promise(function (resolve, reject) {\n\n                var cursor = _this2._connection.transaction([_this2._store], 'readwrite').objectStore(_this2._store).openCursor();\n\n                var calculations = [];\n\n                cursor.onsuccess = function (e) {\n                    var actual = e.target.result;\n\n                    if (actual) {\n\n                        var data = actual.value;\n\n                        calculations.push(new Calculation(data._date, data._expression, data._result));\n\n                        actual.continue();\n                    } else {\n                        resolve(calculations);\n                    }\n                };\n\n                cursor.onerror = function (e) {\n                    console.log(e.target.error);\n                    reject('Failed on listing calculation from IndexedDB');\n                };\n            });\n        }\n    }, {\n        key: 'clearAll',\n        value: function clearAll() {\n            var _this3 = this;\n\n            return new Promise(function (resolve, reject) {\n\n                var request = _this3._connection.transaction([_this3._store], 'readwrite').objectStore(_this3._store).clear();\n\n                request.onsuccess = function (e) {\n                    return resolve();\n                };\n\n                request.onerror = function (e) {\n                    console.log(e.target.error);\n                    reject('Failed on deleting calculation from IndexedDB');\n                };\n            });\n        }\n    }]);\n\n    return CalculationDao;\n}();"]}