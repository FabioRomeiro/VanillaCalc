"use strict";var _createClass=function(){function r(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,n,e){return n&&r(t.prototype,n),e&&r(t,e),t}}();function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var CalculationService=function(){function t(){_classCallCheck(this,t),this._http=new HttpService}return _createClass(t,[{key:"requestLocalCalculations",value:function(){return ConnectionFactory.getConnection().then(function(t){return new CalculationDao(t)}).then(function(t){return t.listAll()})}},{key:"requestCalculations",value:function(){return Promise.all([this.requestOldCalculations(),this.requestYesterdaysCalculations(),this.requestTodaysCalculations()]).then(function(t){return t.reduce(function(t,n){return t.concat(n)},[])}).catch(function(t){throw new Error(t)})}},{key:"requestTodaysCalculations",value:function(){var t=this;return new Promise(function(n,e){t._http.get("http://localhost:9003/calcs/day").then(function(t){return n(t.map(function(t){return new Calculation(new Date(t.date),t.expression,t.result)}))}).catch(function(t){return e(t)})})}},{key:"requestYesterdaysCalculations",value:function(){var t=this;return new Promise(function(n,e){t._http.get("http://localhost:9003/calcs/yesterday").then(function(t){return n(t.map(function(t){return new Calculation(new Date(t.date),t.expression,t.result)}))}).catch(function(t){return e(t)})})}},{key:"requestOldCalculations",value:function(){var t=this;return new Promise(function(n,e){t._http.get("http://localhost:9003/calcs/old").then(function(t){return n(t.map(function(t){return new Calculation(new Date(t.date),t.expression,t.result)}))}).catch(function(t){return e(t)})})}},{key:"postCalculation",value:function(n){return ConnectionFactory.getConnection().then(function(t){return new CalculationDao(t)}).then(function(t){return t.add(n)})}},{key:"clearCalculations",value:function(){return ConnectionFactory.getConnection().then(function(t){return new CalculationDao(t)}).then(function(t){return t.clearAll()})}}]),t}();
//# sourceMappingURL=CalculationService.js.map
